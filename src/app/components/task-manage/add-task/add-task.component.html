<p-dialog header="Thêm mới công việc" [(visible)]="isVisible" [modal]="true" [style]="{width: '30%', height: '80%'}">
    <form [formGroup]="formGroup" class="p-fluid">
        <div class="p-field flex pt-4 align-items-center">
            <label for="taskName" class="w-4">Tên công việc <span class="text-red-500">*</span></label>
            <input id="taskName" type="text" class="w-8" pInputText placeholder="Nhập tên công việc"
                formControlName="name" />
        </div>
        <div class="p-field flex pt-4 align-items-center">
            <label for="projectId" class="w-4">Dự án <span class="text-red-500">*</span></label>
            <p-dropdown appendTo="body" [options]="projects" formControlName="projectId" optionLabel="label" class="w-8"
                optionValue="value" placeholder="Chọn dự án"></p-dropdown>
        </div>
        <div class="p-field flex pt-4 align-items-center">
            <label for="currentUserAssignId" class="w-4">Người thực hiện <span class="text-red-500">*</span></label>
            <p-dropdown appendTo="body" [options]="staffs" formControlName="currentUserAssignId" optionLabel="label"
                class="w-8" optionValue="value" placeholder="Chọn người thực hiện"></p-dropdown>
        </div>
        <div class="p-field flex pt-4 align-items-center">
            <label for="deadlineDate" class="w-4">Ngày hoàn thành <span class="text-red-500">*</span></label>
            <p-calendar appendTo="body" id="deadlineDate" formControlName="deadlineDate" [showIcon]="true" class="w-8"
                placeholder="Chọn ngày hoàn thành"></p-calendar>
        </div>
        <div class="p-field flex pt-4 align-items-center">
            <label for="description" class="w-4">Mô tả</label>
            <textarea id="description" rows="3" class="w-8" pInputTextarea placeholder="Nhập mô tả công việc"
                formControlName="description"></textarea>
        </div>
        <div class="p-field flex pt-4 align-items-center justify-content-between">
            <div class="text-3xl font-bold my-2">File đính kèm</div>
            <button pButton type="button" (click)="inputFile.click()" class="justify-content-center w-5rem p-2 cursor-pointer bg-unset hover:surface-200 transition-colors transition-duration-150">
                <i class="pi pi-upload text-2xl text-primary"></i>
            </button>
            <input #inputFile hidden type="file" (change)="onFileSelected($event)" multiple />
        </div>
        <div *ngFor="let file of selectedFiles; let index = index" class="flex align-items-center gap-3 p-3 border-1 surface-border border-round">
            <i class="pi pi-file text-2xl text-primary"></i>
            <div class="flex-1">
                <div class="text-900 font-medium">{{file.name}}</div>
                <div class="text-500">{{file.size | number}}KB</div>
            </div>
            <button (click)="onFileDelete(index)" class="p-2 border-none cursor-pointer bg-unset hover:surface-200 transition-colors transition-duration-150">
                <i class="pi pi-trash text-600 text-red-500"></i>
            </button>
        </div>
    </form>
    <p-footer>
        <button type="button" pButton icon="pi pi-times" label="Hủy" class="p-button-outlined p-button-danger"
            (click)="onCancel()"></button>
        <button type="button" pButton icon="pi pi-check" label="Lưu" (click)="onSave()"></button>
    </p-footer>
</p-dialog>